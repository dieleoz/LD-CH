# DT-LAYOUT-001-2025-10-11
## Sincronizaci√≥n Layout con Datos Oficiales del Contrato

**Fecha:** 11 de Octubre 2025  
**Sistema:** LAYOUT  
**Responsable:** PMO / Equipo T√©cnico  
**Estado:** üîÑ En Proceso  

---

## 1. CONTEXTO Y JUSTIFICACI√ìN

Durante la revisi√≥n del layout oficial del proyecto ferroviario, se identificaron discrepancias entre nuestro sistema actual y los datos oficiales del contrato:

### **Diferencias Detectadas:**
1. **Nomenclatura:** Sistema usa "UFV" vs Contrato usa "UFVF" (Unidad Funcional de V√≠a Ferroviaria)
2. **Puentes Prioritarios:** PKs de puentes no coinciden exactamente
3. **Puente R√≠o Sogamoso:** Falta en nuestro sistema (PK465+200-465+353)
4. **Cronogramas:** Sistema muestra 60m total vs Contrato especifica por lotes (27m/49m/16m)

### **Justificaci√≥n T√©cnica:**
- El contrato es la **fuente √∫nica de verdad**
- Los datos del layout compartido son **oficiales del contrato**
- Necesitamos **coherencia total** entre sistema y contrato
- **UFVF** es la nomenclatura est√°ndar del proyecto

---

## 2. AN√ÅLISIS DEL IMPACTO

### **Archivos Afectados:**
- `IX. WBS y Planificacion/layout_datos.js` (519 KB, 2,182 elementos)
- `VIII. Documentos Maestros y Metodologia/Datos_Layout_Temporales/LAYOUT_INTEGRAL_COMPLETO_v1.0.json`
- `IX. WBS y Planificacion/WBS_Layout_Maestro.html` (interfaz)

### **Sistemas Impactados:**
- **Sistema 02:** Telecomunicaciones (fibra, TETRA)
- **Sistema 01:** Control y Se√±alizaci√≥n (CTC, balizas)
- **Sistema 03:** ITS y Seguridad (CCTV, detectores)

### **Cronograma:**
- **Tiempo estimado:** 2-3 horas
- **Dependencias:** Ninguna
- **Prioridad:** Alta (coherencia contractual)

---

## 3. CAMBIOS ESPEC√çFICOS REQUERIDOS

### **3.1 Nomenclatura UFVF:**
```yaml
cambios_nomenclatura:
  actual: "UFV02, UFV03, UFV40/41"
  nuevo: "UFVF26, UFVF27, UFVF40/41"
  archivos_afectar:
    - layout_datos.js
    - LAYOUT_INTEGRAL_COMPLETO_v1.0.json
    - WBS_Layout_Maestro.html
```

### **3.2 Puentes Prioritarios - PKs Corregidos:**
```yaml
puentes_prioritarios:
  puente_rio_magdalena:
    pk_inicio: "332+230"
    pk_fin: "332+817"
    estado: "‚úÖ Correcto"
  
  puente_rio_carare:
    pk_inicio_actual: "354+348"
    pk_inicio_contrato: "375+727"
    pk_fin: "375+928"
    accion: "Actualizar PK inicio"
  
  puente_rio_cuatro_bocas:
    pk_inicio: "432+178"
    pk_fin: "432+223"
    estado: "‚úÖ Correcto"
  
  puente_rio_sogamoso:
    pk_inicio: "465+200"
    pk_fin: "465+353"
    estado: "‚ùå FALTANTE - Agregar al sistema"
```

### **3.3 Cronogramas por Lotes:**
```yaml
cronogramas_lotes:
  lote_2_1_sur:
    plazo: "27 meses"
    pk_inicio: "201+470"
    pk_fin: "~350+000"
  
  lote_2_1_medio:
    plazo: "49 meses"
    pk_inicio: "~350+000"
    pk_fin: "441+932"
  
  lote_2_2_norte:
    plazo: "16 meses"
    pk_inicio: "441+932"
    pk_fin: "722+250"
```

---

## 4. ELEMENTOS A AGREGAR

### **4.1 Puente R√≠o Sogamoso (NUEVO):**
```json
{
  "ufvf": "UFVF50",
  "tipo": "PUENTE_RIO_SOGAMOSO_INICIO",
  "nombre": "Puente R√≠o Sogamoso - Inicio",
  "descripcion": "Centro",
  "dispositivo": "465+200",
  "ubicacion": "PK465+200 Centro",
  "pk": "2.2",
  "tipo_equipo": "INFRAESTRUCTURA",
  "implementacion": "2.2"
},
{
  "ufvf": "UFVF50",
  "tipo": "PUENTE_RIO_SOGAMOSO_FIN",
  "nombre": "Puente R√≠o Sogamoso - Fin",
  "descripcion": "Centro",
  "dispositivo": "465+353",
  "ubicacion": "PK465+353 Centro",
  "pk": "2.2",
  "tipo_equipo": "INFRAESTRUCTURA",
  "implementacion": "2.2"
},
{
  "ufvf": "UFVF50",
  "tipo": "CCTV_SOG_01",
  "nombre": "C√°mara Puente Entrada",
  "descripcion": "Derecha",
  "dispositivo": "CCTV PTZ",
  "ubicacion": "PK465+200 Derecha",
  "pk": "2.2",
  "tipo_equipo": "EQUIPO ITS",
  "implementacion": "2.2"
},
{
  "ufvf": "UFVF50",
  "tipo": "CCTV_SOG_02",
  "nombre": "C√°mara Puente Salida",
  "descripcion": "Izquierda",
  "dispositivo": "CCTV PTZ",
  "ubicacion": "PK465+353 Izquierda",
  "pk": "2.2",
  "tipo_equipo": "EQUIPO ITS",
  "implementacion": "2.2"
}
```

---

## 5. RIESGOS IDENTIFICADOS

| ID | Descripci√≥n | Estrategia |
|----|-------------|------------|
| R-LAYOUT-001 | P√©rdida de datos durante actualizaci√≥n masiva | MITIGAR - Backup completo antes de cambios |
| R-LAYOUT-002 | Inconsistencia en referencias cruzadas | EVITAR - Actualizar todas las referencias |
| R-LAYOUT-003 | Interfaz HTML puede fallar con nuevos datos | MITIGAR - Probar interfaz despu√©s de cambios |

---

## 6. PLAN DE EJECUCI√ìN

### **Fase 1: Preparaci√≥n (30 min)**
1. ‚úÖ Crear backup completo del sistema actual
2. ‚úÖ Validar datos del contrato
3. ‚úÖ Preparar scripts de actualizaci√≥n

### **Fase 2: Actualizaci√≥n Nomenclatura (45 min)**
1. üîÑ Actualizar UFV ‚Üí UFVF en layout_datos.js
2. üîÑ Actualizar referencias en LAYOUT_INTEGRAL_COMPLETO_v1.0.json
3. üîÑ Actualizar interfaz HTML

### **Fase 3: Correcci√≥n Puentes (30 min)**
1. üîÑ Corregir PK inicio Puente R√≠o Carare
2. üîÑ Agregar Puente R√≠o Sogamoso completo
3. üîÑ Actualizar c√°maras y se√±alizaci√≥n

### **Fase 4: Validaci√≥n (30 min)**
1. üîÑ Probar interfaz Layout Maestro
2. üîÑ Verificar totales y estad√≠sticas
3. üîÑ Validar filtros y funcionalidades

---

## 7. CRITERIOS DE ACEPTACI√ìN

### **‚úÖ Nomenclatura:**
- [ ] Todos los "UFV" cambiados a "UFVF"
- [ ] Referencias cruzadas actualizadas
- [ ] Interfaz HTML funcional

### **‚úÖ Puentes:**
- [ ] Puente R√≠o Carare con PK correcto (375+727)
- [ ] Puente R√≠o Sogamoso agregado (465+200-465+353)
- [ ] C√°maras y se√±alizaci√≥n asociada

### **‚úÖ Total de Elementos:**
- [ ] 2,182 elementos + 4 nuevos = 2,186 elementos total
- [ ] Estad√≠sticas actualizadas en interfaz
- [ ] Filtros funcionando correctamente

---

## 8. VALIDACI√ìN POST-EJECUCI√ìN

### **Pruebas Requeridas:**
1. **Interfaz Layout Maestro:** Carga correcta, filtros funcionando
2. **Estad√≠sticas:** Totales actualizados (2,186 elementos)
3. **Filtros UFVF:** Funcionamiento correcto con nueva nomenclatura
4. **Puentes:** Los 4 puentes prioritarios visibles y correctos
5. **Exportaci√≥n Excel:** Datos completos y correctos

---

## 9. REFERENCIAS

### **Documentos de Referencia:**
- Layout oficial del proyecto (imagen compartida)
- Contrato de Concesi√≥n No. 001 de 2025
- Ap√©ndices T√©cnicos AT1-AT10

### **Archivos del Sistema:**
- `IX. WBS y Planificacion/layout_datos.js`
- `VIII. Documentos Maestros y Metodologia/Datos_Layout_Temporales/LAYOUT_INTEGRAL_COMPLETO_v1.0.json`
- `IX. WBS y Planificacion/WBS_Layout_Maestro.html`

---

## 10. INSTRUCCIONES PARA CURSOR ‚öôÔ∏è

```yaml
dt_metadata:
  dt_id: "DT-LAYOUT-001-2025-10-11"
  sistema: "LAYOUT"
  elementos_afectados: 2186
  tipo_cambio: "Sincronizaci√≥n con contrato"
  prioridad: "Alta"
  impacto_layout: true

archivos_actualizar:
  - file: "IX. WBS y Planificacion/layout_datos.js"
    accion: "actualizar_nomenclatura_y_puentes"
    cambios:
      - campo: "ufv"
        buscar: "UFV"
        reemplazar: "UFVF"
        validar_contexto: true
      - campo: "pk_inicio_puente_carare"
        buscar: "354+348"
        reemplazar: "375+727"
      - campo: "agregar_puente_sogamoso"
        accion: "insertar_elementos"
        elementos: 4

  - file: "VIII. Documentos Maestros y Metodologia/Datos_Layout_Temporales/LAYOUT_INTEGRAL_COMPLETO_v1.0.json"
    accion: "actualizar_referencias"
    cambios:
      - campo: "nomenclatura"
        buscar: "UFV"
        reemplazar: "UFVF"

  - file: "IX. WBS y Planificacion/WBS_Layout_Maestro.html"
    accion: "actualizar_interfaz"
    cambios:
      - campo: "filtros_ufv"
        buscar: "UFV"
        reemplazar: "UFVF"
      - campo: "estadisticas"
        buscar: "2,182"
        reemplazar: "2,186"

items_dependientes:
  recalcular: true
  items:
    - "Layout Maestro"
    - "Estad√≠sticas din√°micas"
    - "Filtros UFVF"
  formula_base: "actualizar_totales"

versionamiento:
  version_actual: "v14.7.1"
  version_nueva: "v14.7.2"
  razon: "Sincronizaci√≥n con datos oficiales del contrato"
  agregar_nota: "Origen: DT-LAYOUT-001 | Fecha: 2025-10-11"

validaciones:
  - verificar_archivos_existen: true
  - backup_antes_modificar: true
  - validar_formato_numeros: true
  - confirmar_con_usuario: true

manejo_errores:
  - archivo_no_existe: "reportar_y_continuar"
  - seccion_no_encontrada: "pedir_confirmacion_manual"
  - validacion_falla: "detener_y_reportar"
  - backup_falla: "detener_ejecucion"
```

---

## 11. ESTADO DE EJECUCI√ìN

- [x] ‚úÖ **Ejecutado Exitosamente**

---

## 12. LOG DE EJECUCI√ìN

```
Fecha ejecuci√≥n: 2025-10-12 00:26:06
Usuario Cursor: Assistant AI
Archivos modificados: 3 (layout_datos.js, LAYOUT_INTEGRAL_COMPLETO_v1.0.json, WBS_Layout_Maestro.html)
Elementos actualizados: Nomenclatura UFV‚ÜíUFVF + 4 elementos Puente R√≠o Sogamoso
Errores encontrados: 0
Tiempo ejecuci√≥n: ~15 minutos
Backup creado: backup_layout_pre_DT-LAYOUT-001_20251012_002606
```

---

**DT-LAYOUT-001-2025-10-11** | **Sistema:** LAYOUT | **Estado:** ‚úÖ Completado | **Prioridad:** Alta
