# T06.4 - DEFINICIÓN TÉCNICA DE INTERFAZ SICC v1.0
## API REST PARA REPORTE DE INDICADORES (ANI)

**Disciplina:** Ingeniería de Sistemas
**Base Técnica:** V.5 Integración (v7.0) + AT4 Indicadores
**Fase:** Detalle Constructivo (T06)

---

## 1. OBJETIVO
Definir la estructura de datos (Payloads JSON) para la integración entre el **Centro de Control (CTC)** y el **Sistema de Información de la Concesión (SICC)**, garantizando el reporte automático del KPI de disponibilidad (99.5%).

---

## 2. ESPECIFICACIÓN DE ENDPOINTS

### 2.1 Reporte de Disponibilidad Diaria
**Endpoint:** `POST /api/v1/kpi/availability`
**Descripción:** Envío del cálculo de disponibilidad acumulada de las últimas 24 horas.

**Payload JSON:**
```json
{
  "timestamp": "2026-02-06T23:59:59Z",
  "kpi_id": "AT4_AVAILABILITY",
  "value": 99.85,
  "target": 99.50,
  "status": "COMPLIANT",
  "subsystems": [
    {
      "name": "TETRA_COMMS",
      "uptime_seconds": 86200,
      "downtime_seconds": 200,
      "availability": 99.76
    },
    {
      "name": "VIRTUAL_SIGNALING",
      "uptime_seconds": 86400,
      "downtime_seconds": 0,
      "availability": 100.00
    }
  ]
}
```

### 2.2 Alerta de Fallo Crítico
**Endpoint:** `POST /api/v1/alerts/critical`
**Descripción:** Notificación inmediata de fallos que afecten la seguridad o disponibilidad.

**Payload JSON:**
```json
{
  "alert_id": "ALT-20260206-001",
  "severity": "CRITICAL",
  "system": "POWER_GRID",
  "location": "TOWER_SITE_12",
  "message": "Main power failure. Running on Generator. Fuel autonomy: 48h.",
  "action_taken": "Automatic transfer switch activated."
}
```

---

## 3. SEGURIDAD Y AUTENTICACIÓN
- **Protocolo:** TLS 1.3
- **Autenticación:** OAuth 2.0 (Client Credentials Flow)
- **Token Expiry:** 3600 segundos

---

## 4. VALIDACIÓN DE CALIDAD
| Criterio | Verificación |
|:---|:---:|
| ¿Target KPI es 99.5%? | ✅ (Requerido) |
| ¿Formato JSON estricto? | ✅ (Requerido) |
| ¿Incluye desglose subsistemas? | ✅ (Requerido) |
